name: 01.07.00.$(BuildID)$(Rev:.r)

trigger: none
resources:
  repositories:
  - repository: kube
    type: git
    name: logmonitorin
    #ref: pp_796513_vmrg_devop
    ref: main


steps:
- checkout: kube

stages:
 - stage: build
   displayName: Build & Test
   jobs:
   - job: build_test
     displayName: Build Loggin-Monitoring jar
     pool: 
       vmImage: 'ubuntu-18.04'
     steps:
     - checkout: self
       submodules: recursive
       clean: true
       persistCredentials: true
     - script: |
         #cd build/scripts
         printf "${BUILD_BUILDNUMBER}\nY\n" | bash  build.sh
       displayName: Package
     - task: PublishPipelineArtifact@1
       inputs:
         path: $(System.DefaultWorkingDirectory)/build/dist
         artifact: dist